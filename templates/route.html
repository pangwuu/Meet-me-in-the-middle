{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{  url_for('static', filename='css/route.css'  )}}">
<nav> 
    <div class = "navbar">
        <a href = "{{  url_for('index')}}">
            <img src="{{url_for('static', filename='images/longlogo.png')}}" alt="logo" class="small-logo">
        </a>
        <div class = "topnav-right">
            <ul> 
            <li><a href = "{{  url_for('index')}}" class = "home" id = "home">Home</a></li>
        </div>
    </div>
</nav>
{% endblock %}

{% block body %}

    {% if error %}
        {{ error}}
    {% endif %}

    {% if transport_a == "driving" %}
        {% set a_icon = "./static/icons/car-solid.svg" %}
    {% elif transport_a == "walking" %}
        {% set a_icon = "./static/icons/walking-solid.svg" %}
    {% elif transport_a == "bicycling" %}
        {% set a_icon = "./static/icons/bicycle-solid.svg" %}
    {% elif transport_a == "transit" %}
        {% set a_icon = "./static/icons/train-subway-solid.svg" %}
    {% endif %}
    

    {% if transport_b == "driving" %}
        {% set b_icon = "./static/icons/car-solid.svg" %}
    {% elif transport_b == "walking" %}
        {% set b_icon = "./static/icons/walking-solid.svg" %}
    {% elif transport_b == "bicycling" %}
        {% set b_icon = "./static/icons/bicycle-solid.svg" %}
    {% elif transport_b == "transit" %}
        {% set b_icon = "./static/icons/train-subway-solid.svg" %}
    {% endif %}

    {% if places %}
        <div class = "grid-container">
            <div class="grid-items-locations">
            {% for place in places %}
                <div class = "grid-title">
                    <h3>{{ place.name }}</h3>
                </div>
                <div class = "grid-info">
                    <p class="rating">
                        {% if place.rating %}
                            {{ place.rating }} / 5 ({{ place.total_ratings }} ratings)
                        {% else %}
                            No ratings available
                        {% endif %}
                    </p>
                    <p class="time-info">
                        <img src={{a_icon}} alt="transporta" class="small-icon-a">
                        {{ place.time_from_a }} minutes<br>
                        <img src={{b_icon}} alt="transportb" class="small-icon-b">
                        {{ place.time_from_b }} minutes
                    </p>
                </div>
                <div class = "grid-image">
                    <img src="{{ place.business_image_link }}" alt="Image of {{ place.name }}" class = "place-img">
                </div>
                <div class = "grid-address">
                    <p><strong>Address:</strong> {{ place.address }}</p>
                </div>
                {% endfor %}
            </div>

            <div class = "grid-items-map">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d13248.938434435806!2d151.18500284100202!3d-33.883611176409254!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6b12b1d4ab9ef1d9%3A0x1d017d69037a07c0!2sThe%20University%20of%20Sydney!5e0!3m2!1sen!2sau!4v1724478106864!5m2!1sen!2sau" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="main-map"></iframe>
            </div>
        </div>
    {% else %}
        <p>No results found.</p>
    {% endif %}

{% endblock %}